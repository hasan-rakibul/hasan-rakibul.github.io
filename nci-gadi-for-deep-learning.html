<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>NCI Gadi for deep learning</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Personal note to access NCI Gadi cluster for deep learning workflow. Please be informed that things might have changed since I last accessed..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Rakibul Hasan</a></h1>
                <nav><ul>
                    <li><a href="/">home</a></li>
                    <li><a href="/about_me">about me</a></li>
                    <li><a href="/publications">publications</a></li>
                    <li><a href="/activity">activity</a></li>
                    <li><a href="/category/blogs.html">blogs</a></li>
                    <li><a href="/student_corner">student corner</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/nci-gadi-for-deep-learning" rel="bookmark"
           title="Permalink to NCI Gadi for deep learning">NCI Gadi for deep learning</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-04-16T00:00:00+08:00">
                Published: Sun 16 April 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/rakibul-hasan.html">Rakibul Hasan</a>
        </address>
<p>In <a href="/category/blogs.html">blogs</a>.</p>

</footer><!-- /.post-info -->      <p>Personal note to access NCI Gadi cluster for deep learning workflow. Please be informed that things might have changed since I last accessed and/or I might be mistaken on my notes.</p>
<h1>Access from ARE (Australian Research Environment)</h1>
<ul>
<li>Login at <a href="https://are.nci.org.au/">https://are.nci.org.au/</a><ul>
<li>Jupyterlab (gpuvolta) is good for running python programs. Now, it also has internet access but not fast like <em>analysis</em></li>
<li>Virtual Desktop (GPU)<ul>
<li>Not smooth/fast as compared to Jupyterlab</li>
<li>Queue can be either <em>analysis</em> or <em>gpuvolta</em>. Now, both have internet access but speed is very limited in <em>gpuvolta</em>. <em>gpuvolta</em> allow more GPU than <em>analysis</em><ul>
<li>As they have internet access, new modules/packages can be installed from compute node unless it requires sudo access</li>
</ul>
</li>
<li>Setup VNC resolution as per your monitor (e.g., 1920x1080), otherwise it will be hard to see all corners</li>
<li>From <em>advanced options</em>, enter a reasonable <em>Jobfs size</em> (default is 100MB, which is insufficient). System will crash if more than allocated <em>jobfs</em> is used.</li>
<li>It gives VNC access to <a href="https://rockylinux.org/">Rocky Linux</a> </li>
</ul>
</li>
<li>Be aware of your remaining Walltime as it automatically disconnects the session when time ends</li>
<li>File management can also be done from ARE web portal</li>
</ul>
</li>
</ul>
<h2>Python module/package installation</h2>
<ul>
<li>NCI user support: "<code>/g/data/</code> should be the best place for installing software packages"</li>
<li>NCI user support: "We do not recommend to use "conda" on Gadi as it creates lots of small files, interfere with the Gadi environment and creates other problems. We recommend to install packages using "pip" command, if possible."</li>
<li>User's home directory limit is 10GB only, so better not to install at home directory (otherwise, <em>disk quota exceeded</em> error will happen.)</li>
<li>Initially, I installed <em>miniconda</em> at <code>/scratch/&lt;project id&gt;/&lt;username&gt;/miniconda3</code>)<ul>
<li><strong>Not a good option because file expiry policy (auto-delete) is in place for <code>/scratch</code></strong></li>
<li>If conda is installed, Pytorch needs to be (re)installed as per <a href="https://pytorch.org/get-started/locally/">pytorch website</a>, otherwise default anaconda pytorch doesn't use GPU</li>
<li>If installed in <code>/scratch/</code>, be aware of inode (number of files) usage because it has a limit after which VDI session will not be created ("Your session has entered a bad state...")<ul>
<li>I installed <em>anaconda</em> and used up more than allowed inode, so couldn't create new VDI session, which I fixed (uninstalled anaconda) from login node (Gadi terminal)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1>Modules</h1>
<ul>
<li>Check avialable moduels<ul>
<li><code>module avail &lt;search string&gt;</code></li>
</ul>
</li>
<li>Load module<ul>
<li><code>module load &lt;module name/version(preferable)&gt;</code></li>
</ul>
</li>
<li>Check loaded moduels<ul>
<li><code>module list</code></li>
</ul>
</li>
<li>Unload module<ul>
<li><code>module unload &lt;module name&gt;</code></li>
</ul>
</li>
<li>Install modules from requirements.txt<ul>
<li>Install from login node as qsub computing node has no internet access</li>
<li>From file<ul>
<li><code>python3 -m pip install -v --no-binary :all: --user -r requirements.txt</code></li>
</ul>
</li>
<li>A single package<ul>
<li><code>python3 -m pip install -v --no-binary :all: --user &lt;module name&gt;</code></li>
</ul>
</li>
<li>if binary install is unavailable, omit <code>--no-binary :all:</code></li>
</ul>
</li>
</ul>
<h1>File transfer from local machine to Gadi</h1>
<p><code>scp &lt;file with path&gt; &lt;username&gt;@gadi-dm.nci.org.au:&lt;directory&gt;</code></p>
<ul>
<li>Above command to be run from local machine</li>
<li><em>directory</em> would be something like <code>/home/&lt;some number&gt;/&lt;username&gt;</code> for home directory</li>
<li><code>pwd</code> to check <em>current directory</em> at Gadi login/compute note</li>
</ul>
<p>&nbsp;</p>
<h1>Access from Gadi terminal &ndash; not required if ARE is sufficient</h1>
<h2>Access login node from a linux terminal</h2>
<p><code>ssh &lt;username&gt;@gadi.nci.org.au</code></p>
<h2>Submitting interactive job (accessing a compute node where I can interactively use resources, i.e., run programs)</h2>
<p><code>qsub -I -qgpuvolta  -P&lt;project id&gt; -lwalltime=01:00:00,ncpus=48,ngpus=4,mem=48GB,jobfs=200GB,storage=gdata/&lt;project id&gt;,wd</code></p>
<ul>
<li>No internet access after login :(<ul>
<li>So, if the program requires internet, it won't work!</li>
</ul>
</li>
</ul>
<h1>Manuals/helping resources</h1>
<ul>
<li><a href="https://opus.nci.org.au/display/Help/0.+Welcome+to+Gadi">https://opus.nci.org.au/display/Help/0.+Welcome+to+Gadi</a></li>
<li><a href="https://opus.nci.org.au/display/Help/Python">https://opus.nci.org.au/display/Help/Python</a></li>
<li><a href="https://opus.nci.org.au/display/Help/Gadi+Quick+Reference+Guide">https://opus.nci.org.au/display/Help/Gadi+Quick+Reference+Guide</a></li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>find me on</h2>
                        <ul>
                            <li><a href="https://scholar.google.com.au/citations?user=DuCQ8goAAAAJ&hl=en">Google Scholar</a></li>
                            <li><a href="https://www.researchgate.net/profile/Md-Rakibul-Hasan-10">ReserchGate</a></li>
                            <li><a href="https://www.linkedin.com/in/m-rakibul">LinkedIn</a></li>
                            <li><a href="https://github.com/hasan-rakibul">GitHub</a></li>
                            <li><a href="https://orcid.org/0000-0003-2565-5321">ORCiD</a></li>
                            <li><a href="https://www.bracu.ac.bd/about/people/md-rakibul-hasan">BRAC University</a></li>
                            <li><a href="mailto:Rakibul.Hasan@curtin.edu.au">e-mail</a></li>
                        </ul>
                </div><!-- /.blogroll -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                        &copy; 2022 &ndash; 2023 Md Rakibul Hasan </br>
                        Proudly developed by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <!-- <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p> -->
        </footer><!-- /#contentinfo -->

</body>
</html>